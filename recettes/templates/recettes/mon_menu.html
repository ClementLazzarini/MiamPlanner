<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-g">
    <title>Mon Menu</title>
    </head>
<body>
    <h1>Mon Menu de la Semaine</h1>
    <nav>
        <a href="{% url 'generateur' %}">Retour au Générateur</a>
        |
        <a href="{% url 'recette_list' %}">Voir toutes mes recettes</a>
    </nav>
    <hr>

    <div id="menu-container">
        <p>Chargement du menu...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('menu-container');
            const savedMenu = localStorage.getItem('savedMenu'); // On lit le menu

            if (!savedMenu) {
                container.innerHTML = "<p>Aucun menu n'est sauvegardé.</p>";
                return;
            }

            const menuData = JSON.parse(savedMenu);
            let html = '<ul>';

            // On boucle sur les données du menu
            for (const [repas, data] of Object.entries(menuData)) {
                if (data) {
                    html += `<li><strong>${repas} :</strong> `;

                    if (data.url) {
                        // C'est une recette
                        html += `<a href="${data.url}">${data.nom}</a>`;
                    } else {
                        // C'est un message (ex: "Aucune recette")
                        html += `<em style="color: red;">${data.nom}</em>`;
                    }
                    html += '</li>';
                }
                // Si data est 'null', on n'affiche rien (l'utilisateur
                // n'a pas demandé d'idée pour ce repas)
            }

            html += '</ul>';
            container.innerHTML = html;
        });
    </script>
</body>
</html>